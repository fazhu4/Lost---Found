import{u as xe,r as P}from"./request-CF48CgIe.js";import{aJ as ke,r as o,l as Ce,o as K,i as V,a as p,d as A,b as e,e as y,w as E,j as q,h as R,_ as W,aE as te,aF as se,aG as B,f as k,aA as Ie,aB as Be,ay as ge,p as oe,aC as ce,aK as Le,aL as ve,aM as me,u as Ee,c as Re,k as Ve,E as pe,g as Ne}from"./index-BMKu-6gW.js";import{w as $e}from"./word-D_HhT6wY.js";import{l as qe}from"./loadingTwo-B22X4bSV.js";import{u as Ue}from"./result-DlAImQiL.js";const fe=ke("imgs",()=>{const v=o({});return{imgName:v,setImg:g=>{v.value=g},clearImg:()=>{v.value=void 0}}},{persist:!0}),Te={class:"fileBox"},ze={class:"fileLeft"},We={class:"fileRight"},Oe={class:"imgInput"},Pe=["src"],Fe=Ce({__name:"fileContent",emits:["validate","submit"],setup(v,{emit:d}){const i=o([]),g=o(""),n=o(!1),b=(S,h)=>{console.log(S,h)},u=S=>{g.value=S.url,n.value=!0},f=xe(),l=fe();o("");const a=o({headerImg:"",textarea:""}),s=o({Authorization:JSON.parse(localStorage.getItem("authToken"))});o();const t=async S=>{console.log(1),console.log("服务器返回:",S),a.value.headerImg=S.data,l.setImg(a.value),console.log(S.data)},_=()=>{l.setImg(a.value)};K(()=>{console.log(f.profile)});const w=d,m=()=>{const S=a.value.textarea.trim()!==""||a.value.headerImg!=="";return w("validate",S),S};return V(()=>a.value.textarea,m),V(()=>a.value.headerImg,m),o(!0),(S,h)=>{const x=R("el-input"),U=R("el-upload"),F=R("el-dialog");return p(),A("div",Te,[e("div",ze,[h[3]||(h[3]=e("div",{class:"fileContent"},[e("div",{class:"fileWord"},"文本内容"),e("div",{class:"fileIcon"})],-1)),y(x,{modelValue:a.value.textarea,"onUpdate:modelValue":h[0]||(h[0]=N=>a.value.textarea=N),onBlur:_,resize:"none",type:"textarea",placeholder:"请在此输入文字"},null,8,["modelValue"])]),e("div",We,[h[5]||(h[5]=e("div",{class:"imgContent"},[e("div",{class:"imgWord"},"图片内容"),e("div",{class:"imgIcon"})],-1)),e("div",Oe,[y(U,{class:"upload-demo",drag:"",action:`\r
            http://8.153.198.100:8091/upload/img`,headers:s.value,"file-list":i.value,"onUpdate:fileList":h[1]||(h[1]=N=>i.value=N),"on-success":t,"list-type":"picture-card","on-preview":u,"on-remove":b,name:"file",multiple:""},{default:E(()=>h[4]||(h[4]=[e("div",{class:"bgInline"},[e("div",{class:"leftInline"}),e("div",{class:"onLoadFile"},[e("div",{class:"topLoad"},"请在此上传您的文件"),e("div",{class:"bottomeLoad"},[q(" Drag & drop or "),e("div",null,"browse"),q(" your file here ")])])],-1)])),_:1},8,["headers","file-list"]),y(F,{modelValue:n.value,"onUpdate:modelValue":h[2]||(h[2]=N=>n.value=N),class:"fullscreen-dialog"},{default:E(()=>[e("img",{"w-full":"",src:g.value,alt:"Preview Image"},null,8,Pe)]),_:1},8,["modelValue"])])])])}}}),Ge=W(Fe,[["__scopeId","data-v-0f6d86fe"]]),Me={class:"bottomInfo"},Xe={class:"leftInfo"},Ze={class:"bottomComment"},De={class:"itemnames"},He={class:"rigthInfo"},Qe={class:"check"},Je={__name:"bottomInfo",emits:["update"],setup(v,{emit:d}){const i=o(""),g=o([{id:1,name:"点赞数",value:""},{id:2,name:"收藏数",value:""},{id:3,name:"转发数",value:""}]),n=d,b=o(),u=["新浪微博","百度","今日头条","知乎","腾讯新闻","搜狐新闻","网易新闻","小红书","其他"],f=o(!0);return V(()=>b.value,l=>{console.log(l),n("update",l[0])}),(l,a)=>{const s=R("el-input"),t=R("el-checkbox"),_=R("el-checkbox-group"),w=R("el-switch");return p(),A("div",Me,[e("div",Xe,[a[3]||(a[3]=e("div",{class:"commentWord"},[e("div",{class:"words"},"相关用户评论"),e("div",{class:"commentIcon"})],-1)),a[4]||(a[4]=e("div",{class:"tips"},"*此项为选填项",-1)),y(s,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=m=>i.value=m),resize:"none",type:"textarea",placeholder:"请在此输入文字"},null,8,["modelValue"]),e("div",Ze,[(p(!0),A(te,null,se(g.value,(m,S)=>(p(),A("div",{class:"bottomItem",key:m.id},[e("div",De,B(m.name),1),y(s,{modelValue:m.value,"onUpdate:modelValue":h=>m.value=h,style:{width:"142px",height:"35px"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))])]),e("div",He,[a[6]||(a[6]=e("div",{class:"region"},[e("div",{class:"regionWord"},"新闻来源"),e("div",{class:"regionIcon"})],-1)),a[7]||(a[7]=e("div",{class:"regionTip"},"*此项为选填项",-1)),y(_,{modelValue:b.value,"onUpdate:modelValue":a[1]||(a[1]=m=>b.value=m),max:1},{default:E(()=>[(p(),A(te,null,se(u,m=>y(t,{key:m,label:m,value:m},{default:E(()=>[q(B(m),1)]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"]),a[8]||(a[8]=e("div",{class:"lines"},null,-1)),e("div",Qe,[a[5]||(a[5]=e("div",{class:"checkName"},"该新闻发布者是否拥有官方认证",-1)),y(w,{modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=m=>f.value=m),size:"large"},null,8,["modelValue"])])])])}}},Ye=W(Je,[["__scopeId","data-v-2d3801fe"]]),je="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAdCAYAAAC9pNwMAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAEwSURBVEiJvVVRFgIhCMRe94qb+ToZuyejj2wjRANam591URgGUQESYGbkJ4iZayZGCo3wwL9IkXusVy3UEjPXrOpLkBQBANvvXc2tUy33VtjWl1uQkLCly+0llU2Fg4TOVy2bypgLq76+HJUd1VfibthkEpJ8M8Z7KWX7yNaBTq0gjMSpxZEhAMAOAFBKkTaLHNvwJsxojlWmy46E4qGXkTzlPJV0NMnqyPxAKkXZFTUaJE3O/WMy30aDPLzv6Rg62yBpTOmXAHi2X+hZ9ECd9dto3Yz4cPp2cRiIrn+DJ4+Cw/dortGamWJs3+5R4FW33ahBGiFxD9KNlErMKhUbZ9NI4kggS0wikCb8CNaqoxOows/fI0qBSTirkkaGWCpAh5+lPkRcWwCaqXQmYPo/AMxtdgQSQTlrAAAAAElFTkSuQmCC",Ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAbVJREFUWEfFV9txwjAQ3HNm4tAFVBLoQFQQqARSCaQCqwPcSZQqSDITX0bGZhzbkqyzIfwinfYeu7cmCH9fSu1A2BSM7UzrXBgGJLl4VmqZEE7VXZNmeiGJY++IAHyu1YmAZf1owVhJqxANoJV9jUFchWgA7ezHViEKgCP7EgMD+VOmV7GzEAXAlf2YKgwGcFZqnhDefRlKqjAIQPW4pd08WGLGPtX6NXiuOtALwD5oH0uA5/IcYT80YK0NYBwJ+PgBjI+iVGYHvNgHmTBv8jvy0dBxw4AhhimAtxoUhQYrFFX6PzG2j1of/w1ArZ6XFgSmW5ql616TLeUQ3hNEm6pXFtwDRJ9O/KHhLUG4RKqjA99KbZhwmLLvPoXsFaKJQXhXtVOKp9KHkFlxAqg8X6wEdzpXMBYzrY2rpTcHkGbau/B8AA7W9Y4dRnkL1sru/vD6DSAcA4DHZl95Na8/cPqBqfZDyCVJdeC62wd4iHgd8FKwx3JZt0yEncPMiAB0GGBLyZfvwF5O2z3yACyZsGsPr08LelvQqoCJ+QC9WryGj4wGUGcTMpQ+ljRi5CIlnISCA4L8Allu7yGN3o0DAAAAAElFTkSuQmCC",et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAYCAYAAAACqyaBAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAEsSURBVEiJtVZtDsMgCIVdbO5kZiezO9nbH5tRBH1mG0mTVuF9ELWK/CEAVAANn6gA6j+4PPEsLgJ0A7T01xPgEBFR1afLayJSbI75FhE5VPXB8p5tpB0ZobbeYjSWuI1cawEEVtlJHgqCjkwdAShUriNegdrcaQds7tfEW47k2q2viZO6wpDfPICYbeK3RHdYE/CD1DnWMo6N6mEe18UXifM5NRpMWz0UJuKTWrsuYCfGwU1nhjwSdiHOXKfbBLNV+iGIRMXETnHqmiGfCIqJe8LSdQA0ONwm7kmn898cjSyxI1+2E8QxShMHycyfyUZDP3T609z8+vbCOJo4y4K7NmWtMo6KB0N+wWggFqQXkIHZCEGR7PFdAbOW0n84NsILZHdxN0MvVT1+Tf4GJFIF+GU5a84AAAAASUVORK5CYII=",tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAYCAYAAADtaU2/AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAELSURBVEiJvZVrEoMgDIRJp/dqPBl6MrzZ9kfBZkKCULGZcfAB+yVkB0OYGAAiPpEA8EztFpShojX/cUMOu0gm/QP8EvdrHhlAnMioQ/ZXPcOCP38BiEd27gMRbbnNawhhBRCIaBuGqQpakdTaLrN5UBeirmpLldtds50BS+V8IXnfbAb0sjNP4XdADe2kP4z1Yxx86HtQjPaxE5yqosTLu6FffVXt9CPONZbMprEwqqytqHzhQvPHaiHGTisZUWi4ZiV89ru8XPJoOXpXow7O105ESynoABGRrrZsX3Iq7Oo56r9TEhpsLZDgYaAFRs8ReRVogPu0ZkAdrfbJNwuatThXfq5VJl+FjsYbtfAlSzYNqDwAAAAASUVORK5CYII=",st=({title:v,text:d,img_path:i,comments:g,form:n})=>P.post("/rumor/upload_text",{title:v,text:d,img_path:i,comments:g,form:n}),ot=({url:v,type:d})=>P.post("/rumor/upload_url",{url:v,type:d}),at=({results_id:v})=>P.post("/collection/insert",{results_id:v}),lt=({results_id:v})=>P.post("/collection/delete",{results_id:v}),it=({id:v})=>P.get("/rumor/crawler_bad/result",{params:{id:v}}),nt=({results_id:v})=>P.get("/rumor/outcome",{params:{results_id:v}}),rt={key:0,class:"titles"},dt={class:"timeBox"},ut={class:"resultTime"},ct={class:"outBox"},vt={class:"newBox"},mt={class:"newWord"},pt={key:0,class:"iconList"},gt={key:0,class:"imgBox"},ft={key:1,class:"imgBox"},At={class:"newRegion"},_t={__name:"resultTitle",props:{list:{type:Object,required:!0},types:{type:String,required:!0}},setup(v){const d=async()=>{const s=await at({results_id:n.value.id});console.log(s)},i=async()=>{const s=await lt({results_id:n.value.id});console.log(s)};o([{id:1,src:"/src/assets/result/Vector (1).png"},{id:2,src:"/src/assets/result/分组 7.png"},{id:3,src:"/src/assets/result/vector (2).png"}]);const g=v,n=o();function b(s){const t=new Date(s),_=t.getFullYear(),w=t.getMonth()+1,m=t.getDate(),S=t.getHours().toString().padStart(2,"0"),h=t.getMinutes().toString().padStart(2,"0"),x=t.getSeconds().toString().padStart(2,"0");return`${_}.${w}.${m} ${S}:${h}:${x}`}const u=o(""),f=o();V(()=>g.types,s=>{s&&(f.value=s)},{immediate:!0}),V(()=>g.list,s=>{s&&(n.value=s,u.value=b(Number(s.time)),console.log(s.time,u.value),console.log(s))},{immediate:!0});const l=o(!0),a=s=>{l.value?d():i(),l.value=!l.value};return(s,t)=>n.value?(p(),A("div",rt,[t[6]||(t[6]=e("div",{class:"titleBox"},[e("div",{class:"resultWord"},"谣言识别结果报告"),e("div",{class:"resultIcon"})],-1)),e("div",dt,[e("div",ut,"生成时间："+B(u.value),1),t[2]||(t[2]=e("div",{class:"says"},"检测结果仅供参考，具体以官方发布为准",-1))]),t[7]||(t[7]=e("div",{class:"gapLine"},null,-1)),e("div",ct,[e("div",vt,[e("div",mt,"新闻标题："+B(n.value.title),1),t[3]||(t[3]=e("div",{class:"newIcon"},null,-1))]),f.value==="nose"?(p(),A("div",pt,[l.value?(p(),A("div",gt,[e("img",{src:je,alt:"",class:"imgs",onClick:t[0]||(t[0]=_=>a())})])):k("",!0),l.value?k("",!0):(p(),A("div",ft,[e("img",{src:Ke,alt:"",class:"imgs",onClick:t[1]||(t[1]=_=>a())})])),t[4]||(t[4]=e("div",{class:"imgBox"},[e("img",{src:et,alt:"",class:"imgs"})],-1)),t[5]||(t[5]=e("div",{class:"imgBox"},[e("img",{src:tt,alt:"",class:"imgs"})],-1))])):k("",!0)]),e("div",At,"信息来源："+B(n.value.form)+"  新闻类别："+B(n.value.type),1)])):k("",!0)}},yt=W(_t,[["__scopeId","data-v-d868cde4"]]),bt={class:"smallTitle"},ht={class:"name"},wt={__name:"smallTitle",setup(v){return(d,i)=>(p(),A("div",bt,[i[0]||(i[0]=e("div",{class:"circle"},null,-1)),e("div",ht,[Ie(d.$slots,"word",{},void 0,!0)])]))}},j=W(wt,[["__scopeId","data-v-71d0dc17"]]),St={id:"container"},xt={__name:"circleChart",props:{lists:{type:Object,required:!0}},setup(v){const d=v,i=o(),g=o(),n=o(),b=o(null);let u=null;const f=()=>b.value?{width:b.value.offsetWidth,height:b.value.offsetHeight}:{width:0,height:0},l=()=>{const t=f(),_=Math.min(t.width,t.height)*.07;return Math.max(12,Math.min(24,_))},a=()=>{if(u){const t=l(),_=u.getOption();_.title[0].textStyle=_.title[0].textStyle||{},_.title[0].textStyle.fontSize=t,u.setOption(_),u.resize()}},s=Be(()=>{const t=[{value:i.value,name:"可信度"},{value:n.value,name:"图像真实度"},{value:g.value,name:"文本因子"}].filter(w=>w.value!==null&&!isNaN(w.value)),_=t.reduce((w,m)=>w+Number(m.value),0);return t.map(w=>({name:w.name,value:_===0?0:Math.round(Number(w.value)/_*1e3)}))});return V(()=>d.lists,t=>{t&&(i.value=t.reliability,g.value=t.text_factor,n.value=t.image_factor)},{immediate:!0}),K(()=>{u=ge(b.value);const t=["rgba(67, 207, 124, 1)","rgba(0, 121, 250, 0.7)","rgba(0, 250, 246, 0.7)"],_=[];for(let w=0;w<5;w++)_.push({value:20,itemStyle:{color:"rgba(67, 207, 124, 1)"}},{value:1,itemStyle:{color:"rgba(0, 0, 0, 0)"}});V(s,w=>{const m=w.map((h,x)=>({value:h.value,name:h.name,itemStyle:{color:t[x],borderColor:t[x],borderWidth:5,shadowBlur:20,shadowColor:t[x]},label:{show:!0,position:"outer",alignTo:"none",distanceToLabelLine:1,formatter:U=>{const F=U.name,N=U.percent;return`${F.replace(/(.{2})/g,`$1
`)}${N}%`},textStyle:{color:"#fff",fontSize:12,width:85,overflow:"break"}},labelLine:{show:!0,lineStyle:{color:t[x]}}})),S={color:t,title:{text:"识别结果",top:"45%",left:"37%",textStyle:{color:"#fff",fontSize:l(),fontWeight:"400"}},series:[{type:"pie",radius:["78%","75%"],center:["49%","50%"],data:m},{type:"pie",radius:["60%","63%"],center:["49%","50%"],hoverAnimation:!1,label:{show:!1},labelLine:{show:!1},data:_}]};u.setOption(S),a()},{immediate:!0}),window.addEventListener("resize",a)}),oe(()=>{window.removeEventListener("resize",a),u&&u.dispose()}),(t,_)=>(p(),A("div",St,[e("div",{ref_key:"chart",ref:b,style:{width:"100%",height:"100%"}},null,512)]))}},kt={class:"circleStatic"},Ct={class:"circleBox"},It={class:"circles"},Bt={key:0,class:"percent"},Lt={class:"trust"},Et={class:"num"},Rt={class:"text"},Vt={class:"num"},Nt={class:"real"},$t={class:"num"},qt={__name:"noseResult",props:{list:{type:Object,required:!0}},setup(v){const d=v,i=o();function g(f){return parseInt(f*100)+"%"}const n=o(),b=o(),u=o();return V(()=>d.list,f=>{f&&(i.value=f,n.value=g(f.reliability),b.value=g(f.text_factor),f.image_factor!="null"?u.value=g(f.image_factor):u.value=f.image_factor,console.log(u.value))},{immediate:!0}),(f,l)=>(p(),A("div",kt,[y(j,null,{word:E(()=>l[0]||(l[0]=[q("综合识别结果")])),_:1}),e("div",Ct,[e("div",It,[y(xt,{lists:i.value},null,8,["lists"])]),i.value?(p(),A("div",Bt,[e("div",Lt,[e("div",Et,B(n.value),1),l[1]||(l[1]=e("div",{class:"names"},"可信度",-1)),l[2]||(l[2]=e("div",{class:"trustBg"},null,-1))]),l[7]||(l[7]=e("div",{class:"gapLine"},null,-1)),e("div",Rt,[e("div",Vt,B(b.value),1),l[3]||(l[3]=e("div",{class:"names"},"文本因子",-1)),l[4]||(l[4]=e("div",{class:"textBg"},null,-1))]),l[8]||(l[8]=e("div",{class:"gapLines"},null,-1)),e("div",Nt,[e("div",$t,B(u.value=="null"?"无":u.value),1),l[5]||(l[5]=e("div",{class:"names"},"图像真实度",-1)),l[6]||(l[6]=e("div",{class:"realBg"},null,-1))])])):k("",!0)])]))}},Ut=W(qt,[["__scopeId","data-v-e4ebb150"]]),Tt={class:"wordsReport"},zt={key:0,class:"wordBox"},Wt={__name:"noseWord",props:{wordList:{type:Array,required:!0}},setup(v){const d=v,i=o();return V(()=>d.wordList,g=>{g&&(i.value=g)},{immediate:!0}),(g,n)=>(p(),A("div",Tt,[y(j,null,{word:E(()=>n[0]||(n[0]=[q("内容分析报告")])),_:1}),i.value?(p(),A("div",zt,[y($e,{wordArrays:i.value},null,8,["wordArrays"])])):k("",!0),n[1]||(n[1]=e("div",{class:"wordTitle"},"识别结果词云图",-1))]))}},Ot=W(Wt,[["__scopeId","data-v-8aad32bd"]]),Pt={__name:"emotion",props:{emotionArrays:{type:Object,required:!0}},setup(v){const d=v,i=o();V(()=>d.emotionArrays,n=>{n&&(i.value=n)},{immediate:!0});const g=o(null);return K(()=>{const n=ge(g.value),b=i.value,u=b.map(s=>s.type),f=b.map(s=>s.value),l={backgroundColor:"transparent",grid:{left:"0%"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},backgroundColor:"rgba(204, 204, 204, 0.7)",borderColor:"transparent",borderWidth:1,padding:[6,15],textStyle:{color:"rgba(255, 255, 255, 1)",fontSize:14,fontWeight:"bold"},position:function(s,t,_,w,m){return[s[0]-m.contentSize[0]/2,s[1]-m.contentSize[1]]},formatter:s=>`
        <div style="font-size: 14px;">
          占比: ${b.find(_=>_.type===s[0].name).num}
        </div>
      `},legend:{show:!1},xAxis:{type:"category",data:u,axisLine:{lineStyle:{color:"#ccc"}},axisLabel:{textStyle:{align:"center",color:"rgba(255, 255, 255, 1)",fontSize:14,fontWeight:500}},axisTick:{show:!1}},yAxis:{show:!0,splitLine:{show:!1},axisLine:{show:!0,lineStyle:{color:new ce(0,0,0,1,[{offset:0,color:"rgba(42, 130, 228, 1)"},{offset:.5,color:"rgba(0, 186, 173, 1)"},{offset:1,color:"rgba(67, 207, 124, 1)"}]),width:6}},axisLabel:{show:!1},axisPointer:{lineStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(42, 130, 228, 1)"},{offset:.5,color:"rgba(0, 186, 173, 1)"},{offset:1,color:"rgba(67, 207, 124, 1)"}],global:!1},width:2}}},series:[{name:"line",type:"line",smooth:!0,symbol:"circle",symbolSize:18,itemStyle:{color:"rgba(0, 186, 173, 1)",borderColor:"#fff",borderWidth:5,lineStyle:{color:"lightblue"}},data:f},{name:"bar",type:"bar",barGap:"-100%",barWidth:15,itemStyle:{color:new ce(0,0,0,1,[{offset:0,color:"rgba(105, 155, 255, 0.01)"},{offset:1,color:"rgba(105, 255, 237, 1)"}])},z:-12,data:f}]};n.setOption(l);const a=()=>{n.resize()};window.addEventListener("resize",a),oe(()=>{window.removeEventListener("resize",a),n.dispose()})}),(n,b)=>(p(),A("div",{ref_key:"chartContainer",ref:g,style:{height:"110%",width:"100%"}},null,512))}},Ft={class:"noseContent"},Gt={class:"noseBg"},Mt={key:0,class:"error-message"},Xt={class:"regions"},Zt={class:"options"},Dt={key:0,class:"error-messages"},Ht={class:"contentWords"},Qt={key:0,class:"newContent"},Jt={class:"otherStatic"},Yt={class:"emotionKind"},jt={key:0,class:"staticContent"},Kt={class:"bottomReport"},es={class:"content"},ts={class:"bottomButton"},ss={__name:"nose",setup(v){const d=Ve(),i=Ue();oe(()=>{i.setResult("")});const g=fe(),n=o(""),b=["腾讯新闻","网易新闻","搜狐新闻"],u=o([]),f=o(null),l=o(null),a=o(null),s=o("handing"),t=()=>{f.value.classList.add("animate__animated","animate__fadeOut"),f.value.addEventListener("animationend",()=>{s.value="handing",i.setResult("")})},_=()=>{l.value.classList.add("animate__animated","animate__fadeOut"),l.value.addEventListener("animationend",()=>{s.value="sending",i.setResult("")})},w=()=>{f.value.classList.add("animate__animated","animate__fadeOut"),ye()},m=()=>{he()&&(s.value="loading",l.value.classList.add("animate__animated","animate__fadeOut"),N(),x.value="")},S=()=>{a.value.classList.add("animate__animated","animate__fadeOut"),a.value.addEventListener("animationend",()=>{s.value="sending",i.setResult("")})},h=()=>{a.value.classList.add("animate__animated","animate__fadeOut"),a.value.addEventListener("animationend",()=>{s.value="handing",i.setResult("")})},x=o(""),U=o(""),F=c=>{U.value=c},N=async()=>{const c=await st({title:x.value,text:g.imgName.textarea,img_path:g.imgName.headerImg,comments:"",form:U.value});c.code===200&&(s.value="results",i.setResult("results")),console.log(c),C.value=c.data,T.value=D(c.data.word_cloud_diagrams),console.log(T.value),L.value=H(Q(c.data.emotion_factor).probabilities),console.log(L.value)},G=o(1),Ae=c=>{console.log(u.value[0]),u.value[0]=="腾讯新闻"?G.value=1:u.value[0]=="网易新闻"?G.value=2:u.value[0]=="搜狐新闻"&&(G.value=3)},C=o();function D(c){return c.slice(1,-1).split("), ").map($=>{const O=$.replace(/Wcd\(|\)/g,""),[I,de]=O.split(", "),ee=I.split("=")[1],Y=parseInt(de.split("=")[1]);return{name:ee,value:Y}})}const ae={happiness:{type:"快乐",id:1},sadness:{type:"悲伤",id:2},anger:{type:"愤怒",id:3},fear:{type:"害怕",id:4},surprise:{type:"惊讶",id:5},disgust:{type:"厌恶",id:6},like:{type:"中性",id:7}};function H(c){return Object.entries(c).map(([r,z])=>{const $=(z*100).toFixed(2);return{id:ae[r].id,type:ae[r].type,date:"2023年10月",num:`${$}%`,value:parseFloat($)}})}const M=o(!1),X=o(!1),_e=()=>{M.value=!1,X.value=!1,n.value.trim()||(M.value=!0),u.value.length===0&&(X.value=!0),!M.value&&!X.value&&(s.value="loading",w())},L=o(),T=o(),ye=async()=>{const c=await ot({url:n.value,type:G.value});c.code===200&&(s.value="results",i.setResult("results")),console.log(c),C.value=c.data,T.value=D(c.data.word_cloud_diagrams),console.log(T.value),L.value=H(Q(c.data.emotion_factor).probabilities),console.log(L.value)},le=async c=>{const r=await it({id:c});console.log(r),C.value=r.data,T.value=D(C.value.word_cloud_diagrams),r.data.emotion_factor&&(L.value=H(Q(C.value.emotion_factor).probabilities)),console.log(L.value)},ie=async c=>{console.log(c);const r=await nt({results_id:c});console.log(r),C.value=r.data,T.value=D(C.value.word_cloud_diagrams),L.value=H(Q(C.value.emotion_factor).probabilities),console.log(L.value)},Z=o(),Q=c=>{const r=c.match(/predicted_emotion=([^,)]+)/),z=r?r[1]:null,$=c.match(/probabilities=\{(.+?)\}/);let O={};return $&&$[1].split(", ").forEach(ee=>{const[Y,ue]=ee.split("=");Y&&ue&&(O[Y.trim()]=parseFloat(ue))}),{predicted_emotion:z,probabilities:O}},J=o();K(()=>{d.query.id&&(d.query.type==="monitor"?(s.value="results",console.log(Z.value),le(Z.value),i.setResult("results")):d.query.type=="mine"&&(s.value="results",console.log("个人中心"),ie(d.query.id),i.setResult("results")))}),Le(()=>{J.value=d.query.type||"nose",d.query.id&&(d.query.type==="monitor"?(s.value="results",Z.value=d.query.id,console.log(Z.value),le(Z.value)):d.query.type==="mine"&&(s.value="results",console.log(d.query.type),console.log(d.query.id),ie(d.query.id),i.setResult("results")))});function ne(c){return c.replace(/\。{2,}/g,"。")}const re=o(!1),be=c=>{re.value=c},he=()=>!x.value||x.value.trim()===""?(pe.error("新闻标题为必填项"),!1):re.value?!0:(pe.error("请填写新闻文本内容或上传图片(至少一项)"),!1),we=Ne(),Se=()=>{we.back()};return(c,r)=>{const z=R("el-input"),$=R("el-checkbox"),O=R("el-checkbox-group");return p(),A("div",Ft,[e("div",Gt,[s.value==="sending"?(p(),A("div",{key:0,class:"send",ref_key:"sendButton",ref:f},[r[4]||(r[4]=ve('<div class="rightBg" data-v-3d95ed82></div><div class="titles" data-v-3d95ed82><div class="leftWord" data-v-3d95ed82>快速进行谣言识别</div><div class="rightIcon" data-v-3d95ed82></div></div><div class="tips" data-v-3d95ed82><div data-v-3d95ed82>请输入或粘贴新闻链接</div><div data-v-3d95ed82>我们将分析内容 帮助您判断其真实性</div></div><div class="bottomLine" data-v-3d95ed82></div><div class="secondTitle" data-v-3d95ed82><div class="topInfo" data-v-3d95ed82><div class="topWord" data-v-3d95ed82>新闻页面链接上传</div><div class="topIcon" data-v-3d95ed82></div></div><div class="tip" data-v-3d95ed82>*此项为必填项</div></div>',5)),y(z,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=I=>n.value=I),resize:"none",type:"textarea",placeholder:"请在此粘贴链接",class:me({"error-border":M.value})},null,8,["modelValue","class"]),M.value?(p(),A("div",Mt,"请填写新闻链接")):k("",!0),e("div",Xt,[r[3]||(r[3]=e("div",{class:"regionWord"},[e("div",{class:"words"},"谣言来源"),e("div",{class:"regionTip"},"*此项为必选项")],-1)),e("div",Zt,[y(O,{modelValue:u.value,"onUpdate:modelValue":r[1]||(r[1]=I=>u.value=I),max:1},{default:E(()=>[(p(),A(te,null,se(b,I=>y($,{onChange:Ae,key:I,label:I,value:I,class:me({"error-checkbox":X.value})},{default:E(()=>[q(B(I),1)]),_:2},1032,["label","value","class"])),64))]),_:1},8,["modelValue"]),X.value?(p(),A("div",Dt,"请选择谣言来源")):k("",!0)])]),e("div",{class:"bottomButtons"},[e("button",{class:"leftButton",onClick:t},"切换至手动输入信息"),e("button",{class:"rightButton",onClick:_e},"生成报告")])],512)):k("",!0),s.value==="handing"?(p(),A("div",{key:1,class:"hand",ref_key:"writeButton",ref:l},[r[5]||(r[5]=ve('<div class="bg" data-v-3d95ed82></div><div class="title" data-v-3d95ed82><div class="word" data-v-3d95ed82><div class="leftWord" data-v-3d95ed82>快速进行新闻识别</div><div class="rightArrow" data-v-3d95ed82></div></div></div><div class="newTitle" data-v-3d95ed82><div class="newWord" data-v-3d95ed82><div class="leftNew" data-v-3d95ed82>新闻标题</div><div class="newIcon" data-v-3d95ed82></div></div><div class="must" data-v-3d95ed82>*此项为必填项</div></div>',3)),y(z,{modelValue:x.value,"onUpdate:modelValue":r[2]||(r[2]=I=>x.value=I),style:{width:"529px",height:"41px"},placeholder:"请在此输入文字"},null,8,["modelValue"]),r[6]||(r[6]=e("div",{class:"contentImg"},[e("div",{class:"contentWord"},"新闻文本内容与图片"),e("div",{class:"mustOne"},"*两项中必填一项")],-1)),y(Ge,{onValidate:be}),y(Ye,{onUpdate:F}),e("div",{class:"buttons"},[e("button",{class:"leftButton",onClick:_},"返回至上传链接"),e("button",{class:"rightButton",onClick:m},"生成报告")])],512)):k("",!0),Ee(i).result==="results"?(p(),A("div",{key:2,class:"result",ref_key:"resultButton",ref:a},[r[11]||(r[11]=e("div",{class:"bgs"},null,-1)),y(yt,{types:J.value,list:C.value},null,8,["types","list"]),e("div",Ht,[y(j,null,{word:E(()=>r[7]||(r[7]=[q("新闻识别内容")])),_:1}),C.value.text?(p(),A("div",Qt,B(ne(C.value.text)),1)):k("",!0)]),e("div",Jt,[y(Ut,{list:C.value},null,8,["list"]),r[9]||(r[9]=e("div",{class:"firstLine"},null,-1)),y(Ot,{wordList:T.value},null,8,["wordList"]),e("div",Yt,[r[8]||(r[8]=e("div",{class:"topInfo"},"情感分类分布图",-1)),L.value?(p(),A("div",jt,[y(Pt,{emotionArrays:L.value},null,8,["emotionArrays"])])):k("",!0)])]),e("div",Kt,[y(j,null,{word:E(()=>r[10]||(r[10]=[q("综合分析报告")])),_:1}),e("div",es,B(ne(C.value.report)),1)]),e("div",ts,[J.value==="nose"?(p(),A("div",{key:0,class:"back",onClick:S},"返回链接识别页面")):k("",!0),J.value==="nose"?(p(),A("div",{key:1,class:"again",onClick:h},"返回手动识别页面")):(p(),A("div",{key:2,class:"backNavi",onClick:Se},"返回列表"))])],512)):k("",!0),s.value==="loading"?(p(),Re(qe,{key:3})):k("",!0)])])}}},rs=W(ss,[["__scopeId","data-v-3d95ed82"]]);export{rs as default};
