import{l as S,m as H,r as $,o as O,n as f,p as W,q as M,s as p}from"./index-BvHV0dFE.js";function T(t,r){let n;return function(...e){n&&clearTimeout(n),n=setTimeout(()=>{typeof t=="function"&&t.apply(null,e),clearTimeout(n)},r>0?r:100)}}const N=S({name:"VScaleScreen",props:{width:{type:[String,Number],default:1920},height:{type:[String,Number],default:1080},fullScreen:{type:Boolean,default:!1},autoScale:{type:[Object,Boolean],default:!0},delay:{type:Number,default:500},boxStyle:{type:Object,default:()=>({})},wrapperStyle:{type:Object,default:()=>({})},bodyOverflowHidden:{type:Boolean,default:!0}},setup(t,{slots:r}){let n;const e=H({width:0,height:0,originalWidth:0,originalHeight:0,observer:null}),v={box:{overflow:"hidden",backgroundSize:"100% 100%",backgroundColor:"#000",width:"100vw",height:"100vh"},wrapper:{transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"500ms",position:"relative",overflow:"hidden",zIndex:100,transformOrigin:"left top"}},o=$(),g=()=>new Promise(i=>{f(()=>{var l,a;t.width&&t.height?(e.width=t.width,e.height=t.height):(e.width=(l=o.value)==null?void 0:l.clientWidth,e.height=(a=o.value)==null?void 0:a.clientHeight),(!e.originalHeight||!e.originalWidth)&&(e.originalWidth=window.screen.width,e.originalHeight=window.screen.height),i()})});function b(){t.bodyOverflowHidden&&(n=document.body.style.overflow,document.body.style.overflow="hidden")}const w=()=>{e.width&&e.height?(o.value.style.width=`${e.width}px`,o.value.style.height=`${e.height}px`):(o.value.style.width=`${e.originalWidth}px`,o.value.style.height=`${e.originalHeight}px`)},m=i=>{if(!t.autoScale)return;const l=o.value.clientWidth,a=o.value.clientHeight,y=document.body.clientWidth,u=document.body.clientHeight;o.value.style.transform=`scale(${i},${i})`;let d=Math.max((y-l*i)/2,0),s=Math.max((u-a*i)/2,0);typeof t.autoScale=="object"&&(!t.autoScale.x&&(d=0),!t.autoScale.y&&(s=0)),o.value.style.margin=`${s}px ${d}px`},h=()=>{const i=document.body.clientWidth,l=document.body.clientHeight,a=e.width||e.originalWidth,y=e.height||e.originalHeight,u=i/+a,d=l/+y;if(t.fullScreen)return o.value.style.transform=`scale(${u},${d})`,!1;const s=Math.min(u,d);m(s)},c=T(async()=>{await g(),w(),h()},t.delay),x=()=>{(e.observer=new MutationObserver(()=>{c()})).observe(o.value,{attributes:!0,attributeFilter:["style"],attributeOldValue:!0})};return O(()=>{b(),f(async()=>{await g(),w(),h(),window.addEventListener("resize",c),x()})}),W(()=>{var i;window.removeEventListener("resize",c),(i=e.observer)==null||i.disconnect(),t.bodyOverflowHidden&&(document.body.style.overflow=n)}),M(h),()=>{var i;return p("div",{className:"v-screen-box",style:{...v.box,...t.boxStyle}},[p("div",{className:"screen-wrapper",style:{...v.wrapper,...t.wrapperStyle},ref:o},(i=r.default)==null?void 0:i.call(r))])}}});export{N as T};
